<!DOCTYPE HTML>

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>&lt;epam:memegen&gt;</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script type="text/javascript" src="js/lib/underscore.js"></script>
    <script type="text/javascript" src="js/lib/jquery.js"></script>
    <script type="text/javascript" src="js/lib/backbone.js"></script>
    <link rel="chrome-webstore-item"
          href="https://chrome.google.com/webstore/detail/jgmpoflmemllolbnmidoclcpbpoabcib">
    <script type="text/javascript">
      var PLUGIN_URL = 'https://chrome.google.com/webstore/detail/jgmpoflmemllolbnmidoclcpbpoabcib';
    </script>
    <script type="text/javascript" src="js/analytics.js"></script>
  </head>

  <body>

    <div id="msg" class="msg" style="display: none;"></div>

    <h1 id="header">&lt;epam:memegen&gt;</h1>

    <div id="epam-memegen-install-button" style="display:none;" class="plugin-button">
      <img src="chrome-icon.png" class="plugin-img"/>
      <span class="plugin-link">
          Don't miss a single meme - install Chrome Plugin
      </span>
    </div>

    <div id="sidePane" class="visible_###IS_AUTHENTICATED###">
      <button id="showCreateDialog" onclick="$('.upload').toggle(); ga.trackCreate();">
        Create
      </button>
      <br/>
      <br/>
<!--
      <button id="delete" style="display: none;">
        Delete
      </button>
 -->
      <a href="#popular">Popular Memes</a>
      <a href="#all">All Memes</a>
      <a href="#top">Top Memes</a>
    </div>

    <div id="contentPane">
      <div>
        <div class="upload" style="display: none;">
          <div class="imageWithUpload">
            <div id="preview" class="preview"></div>
            <div id="uploadHelperText" class="uploadHelperText">
                <a id="uploadLink" href="#">Upload</a> new image,<br/>
                or click on any meme.
            </div>
            <input id="uploadFile" class="uploadFile" type="file">
            <input id="uploadUrl" type="hidden" value="###UPLOAD_URL###">
            <br/>
          </div>
          <div class="form">
            <textarea id="top"></textarea>
            <br/>
            <textarea id="center"></textarea>
            <br/>
            <textarea id="bottom"></textarea>
            <br/>
            <input type="hidden" name="blobKey"/>
            <button id="submit">Submit</button>
          </div>
          <div class="clear"></div>
        </div>
      </div>

      <div class="notDisplay_###IS_AUTHENTICATED###">
        <a href="###LOGIN_URL###">Please login</a>.
        Only accounts <b>@epam.com</b> are allowed<span class="display_###IS_LOGGED_IN###">,
        but your email is <b>###USER_EMAIL###</b>.
        <br/>
        <br/>

        If it keeps logging you into <b>###USER_EMAIL###</b> then you have to
        <a href="###LOGOUT_URL###">logout</a> (logs you out of all google services)</span>.

        <br/>
        <br/>
        Most people already have an account at <a href="http://google.com/a/epam.com">google.com/a/epam.com</a>,
        but if you don't, please ask <b>helpdesk@epam.com</b>.
        <br/>
        Sorry for inconvenience, we're working on a more convenient authentication, using PMC API.
      </div>

      <div id="memesList"></div>
    </div>

    <script>
    var MEMES_JSON = ###MEMES_JSON###;
    var IS_AUTHENTICATED = ###IS_AUTHENTICATED###;
    </script>
    <script type="text/javascript" src="js/model/vote.js"></script>
    <script type="text/javascript" src="js/model/meme.js"></script>
    <script type="text/javascript" src="js/model/app.js"></script>
    <script type="text/javascript" src="js/create.js"></script>
    <script type="text/javascript" src="js/msg.js"></script>
    <script type="text/javascript" src="js/plugin.js"></script>
    </body>
</html>
